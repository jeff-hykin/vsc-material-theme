(using_atk_version): 1.0
(project):
    name: XD Theme
    description: my theme
    
    commands: &commands # if you dont know what the & means, see https://blog.daemonl.com/2016/02/yaml.html
        build: ruby theme_generator.rb
        publish: !language/ruby |
            require 'atk_toolbox'
            
            system "ruby theme_generator.rb"
            previous_process_finished_successfully = $?.success?
            if previous_process_finished_successfully
                # push build
                if Console.args[0]
                    system "project sync --message='#{Console.args[0]}'"
                else
                    system "project sync"
                end
                
                if -"npm version patch"
                    system "project synchronize --message='version bump'"
                    puts "Publishing"
                    system "vsce publish"
                    puts "Finished Publishing"
                end
            end
        (setup): ruby setup.rb
    
    dependencies: &dependencies
        atk: 0.0.1
        ruby: 2.5.0
        npm: 12.7.0
        {gem: 2.7.3}:
            colormath: 0.1.2
    
    (advanced_setup):
        (put_new_dependencies_under): [ '(project)', 'basic_info', 'dependencies' ]
        # caveats for a specific OS
        when(--os is 'mac'):
            (project_commands):
                <<: *commands
            (dependencies):
                <<: *dependencies
            
        when(--os is 'windows'):
            (project_commands):
                <<: *commands
            (dependencies):
                <<: *dependencies
                
        when(--os is 'linux'):
            (project_commands):
                <<: *commands
            (dependencies):
                <<: *dependencies
